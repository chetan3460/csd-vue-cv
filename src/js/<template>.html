<template>
  <div class="container">
    <!-- Your HTML content here -->
  </div>
</template>

<script>
import { onMounted, ref } from 'vue';

export default {
  setup() {
    const containerRef = ref(null);
    const bodyRef = ref(document.body);

    onMounted(() => {
      const scroller = new LocomotiveScroll({
        el: containerRef.value,
        smooth: true,
      });

      scroller.on('scroll', ScrollTrigger.update);

      ScrollTrigger.scrollerProxy(containerRef.value, {
        scrollTop(value) {
          return arguments.length
            ? scroller.scrollTo(value, 0, 0)
            : scroller.scroll.instance.scroll.y;
        },
        getBoundingClientRect() {
          return {
            left: 0,
            top: 0,
            width: window.innerWidth,
            height: window.innerHeight,
          };
        },
      });

      ScrollTrigger.addEventListener('refresh', () => scroller.update());
      ScrollTrigger.refresh();

      window.addEventListener('load', () => {
        const scrollColorElems = document.querySelectorAll('[data-bgcolor]');
        scrollColorElems.forEach((colorSection, i) => {
          const prevBg = i === 0 ? '' : scrollColorElems[i - 1].dataset.bgcolor;
          const prevText = i === 0 ? '' : scrollColorElems[i - 1].dataset.textcolor;

          ScrollTrigger.create({
            trigger: colorSection,
            scroller: 'section',
            start: 'top 50%',
            onEnter: () => {
              bodyRef.value.style.backgroundColor = colorSection.dataset.bgcolor;
              bodyRef.value.style.color = colorSection.dataset.textcolor;
            },
            onLeaveBack: () => {
              bodyRef.value.style.backgroundColor = prevBg;
              bodyRef.value.style.color = prevText;
            },
          });
        });
      });
    });

    return { containerRef };
  },
};
</script>
