<template>
  <div class="container">
    <!-- Your HTML content here -->
  </div>
</template>

<template>
  <!-- Your template code here -->
</template>

<template>
  <!-- Your template code here -->
</template>

<script setup>
import { onMounted } from 'vue';

const bgColor = () => {
  onMounted(() => {
    /* SMOOTH SCROLL */
    const scroller = new LocomotiveScroll({
      el: document.querySelector('.dizme_tm_all_wrap'),
      smooth: true
    });

    scroller.on('scroll', ScrollTrigger.update);

    ScrollTrigger.scrollerProxy('.dizme_tm_all_wrap', {
      scrollTop(value) {
        return arguments.length
          ? scroller.scrollTo(value, 0, 0)
          : scroller.scroll.instance.scroll.y;
      },
      getBoundingClientRect() {
        return {
          left: 0,
          top: 0,
          width: window.innerWidth,
          height: window.innerHeight
        };
      }
    });

    ScrollTrigger.addEventListener('refresh', () => scroller.update());

    ScrollTrigger.refresh();

    /* COLOR CHANGER */
    window.addEventListener('load', function () {
      const scrollColorElems = document.querySelectorAll('[data-bgcolor]');
      scrollColorElems.forEach((colorSection, i) => {
        const prevBg = i === 0 ? '' : scrollColorElems[i - 1].dataset.bgcolor;
        const prevText = i === 0 ? '' : scrollColorElems[i - 1].dataset.textcolor;

        ScrollTrigger.create({
          trigger: colorSection,
          scroller: '.container',
          start: 'top 50%',
          onEnter: () =>
            gsap.to('body', {
              backgroundColor: colorSection.dataset.bgcolor,
              color: colorSection.dataset.textcolor,
              overwrite: 'auto'
            }),
          onLeaveBack: () =>
            gsap.to('body', {
              backgroundColor: prevBg,
              color: prevText,
              overwrite: 'auto'
            })
        });
      });
    });
  });
};

bgColor(); // Call the function to initialize onMounted behavior
</script>

<template>
  <!-- Your template content -->
</template>

<script setup>
import LocomotiveScroll from 'locomotive-scroll'; // Import LocomotiveScroll if it's not already included

// Scroll to the top of the page
window.scrollTo(0, 0);

// Initialize LocomotiveScroll after a delay
setTimeout(() => {
  const scroller = new LocomotiveScroll({
    el: document.querySelector("[data-scroll-container]"),
    smooth: true,
    mobile: {
      breakpoint: 0,
      smooth: true,
    },
    tablet: {
      breakpoint: 0,
      smooth: true,
    },
  });

  // Add click event listeners to elements with a "data-hash" attribute
  document.querySelectorAll('[data-hash]').forEach((element) => {
    element.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      const anchor = document.querySelector($(element).getAttribute('href'));
      if (anchor) {
        scroller.scrollTo(anchor);
      }
    });
  });
}, 100);

// Handle the window onbeforeunload event
window.onbeforeunload = () => {
  window.scrollTo(0, 0);
};
</script>
